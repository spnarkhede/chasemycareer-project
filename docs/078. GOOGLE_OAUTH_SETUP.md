# Google OAuth Setup Guide

## üîê Complete Setup Instructions for Google Authentication

This guide will walk you through setting up Google OAuth for Chase My Career.

---

## üìã Prerequisites

- Supabase project created ‚úÖ
- Google account for Google Cloud Console
- Application deployed or running locally

---

## üöÄ Step-by-Step Setup

### Step 1: Access Supabase Dashboard

1. Go to [Supabase Dashboard](https://app.supabase.com)
2. Select your project: `chase-my-career`
3. Navigate to **Authentication** ‚Üí **Providers**

### Step 2: Enable Google Provider

1. Find **Google** in the providers list
2. Toggle **Enable Sign in with Google** to ON
3. Keep this tab open - you'll need to add credentials later

### Step 3: Create Google Cloud Project

1. Go to [Google Cloud Console](https://console.cloud.google.com)
2. Click **Select a project** ‚Üí **New Project**
3. Enter project details:
   - **Project name**: `Chase My Career`
   - **Organization**: (optional)
4. Click **Create**
5. Wait for project creation (takes a few seconds)

### Step 4: Enable Google+ API

1. In Google Cloud Console, select your new project
2. Go to **APIs & Services** ‚Üí **Library**
3. Search for **Google+ API**
4. Click on **Google+ API**
5. Click **Enable**
6. Wait for API to be enabled

### Step 5: Configure OAuth Consent Screen

1. Go to **APIs & Services** ‚Üí **OAuth consent screen**
2. Select **External** user type
3. Click **Create**
4. Fill in the required fields:

**App Information:**
- **App name**: `Chase My Career`
- **User support email**: Your email address
- **App logo**: (optional) Upload your logo

**App Domain:**
- **Application home page**: `https://your-domain.com`
- **Application privacy policy link**: `https://your-domain.com/privacy`
- **Application terms of service link**: `https://your-domain.com/terms`

**Developer Contact Information:**
- **Email addresses**: Your email address

5. Click **Save and Continue**

**Scopes:**
6. Click **Add or Remove Scopes**
7. Select these scopes:
   - `openid`
   - `email`
   - `profile`
8. Click **Update**
9. Click **Save and Continue**

**Test Users (for development):**
10. Click **Add Users**
11. Add your email address
12. Click **Save and Continue**

13. Review summary and click **Back to Dashboard**

### Step 6: Create OAuth 2.0 Credentials

1. Go to **APIs & Services** ‚Üí **Credentials**
2. Click **Create Credentials** ‚Üí **OAuth client ID**
3. Select **Application type**: **Web application**
4. Enter **Name**: `Chase My Career Web Client`

**Authorized JavaScript origins:**
5. Click **Add URI** and add:
   - `http://localhost:5173` (for local development)
   - `https://your-production-domain.com` (for production)

**Authorized redirect URIs:**
6. Click **Add URI** and add:
   - `https://itazzlbcxisavqxvkmoe.supabase.co/auth/v1/callback`
   - `http://localhost:5173/auth/callback` (for local development)

7. Click **Create**

**Important:** Copy the credentials shown:
- **Client ID**: `your-client-id.apps.googleusercontent.com`
- **Client Secret**: `your-client-secret`

8. Click **OK**

### Step 7: Add Credentials to Supabase

1. Go back to Supabase Dashboard
2. Navigate to **Authentication** ‚Üí **Providers** ‚Üí **Google**
3. Paste your credentials:
   - **Client ID**: Paste the Client ID from Google
   - **Client Secret**: Paste the Client Secret from Google
4. **Authorized Client IDs**: (leave empty)
5. Click **Save**

### Step 8: Configure Redirect URLs

**In Supabase Dashboard:**
1. Go to **Authentication** ‚Üí **URL Configuration**
2. Add **Site URL**: `https://your-production-domain.com`
3. Add **Redirect URLs**:
   - `http://localhost:5173/auth/callback`
   - `https://your-production-domain.com/auth/callback`
4. Click **Save**

---

## üß™ Testing

### Local Development Testing

1. Start your development server:
   ```bash
   npm run dev
   ```

2. Open browser to `http://localhost:5173`

3. Click **Get Started** or **Sign In**

4. Click **Continue with Google**

5. You should see Google's consent screen

6. Select your Google account

7. Grant permissions

8. You should be redirected back to your app

9. Check that you're signed in (see your avatar in header)

### Production Testing

1. Deploy your application

2. Visit your production URL

3. Follow the same steps as local testing

4. Verify authentication works in production

---

## üîç Troubleshooting

### Error: "redirect_uri_mismatch"

**Problem:** The redirect URI doesn't match what's configured in Google Cloud Console

**Solution:**
1. Check the redirect URI in the error message
2. Go to Google Cloud Console ‚Üí Credentials
3. Edit your OAuth client
4. Add the exact redirect URI from the error message
5. Save and try again

### Error: "Access blocked: This app's request is invalid"

**Problem:** OAuth consent screen not properly configured

**Solution:**
1. Go to Google Cloud Console ‚Üí OAuth consent screen
2. Verify all required fields are filled
3. Make sure your email is added as a test user (for development)
4. Publish the app (for production)

### Error: "Google+ API has not been used in project"

**Problem:** Google+ API not enabled

**Solution:**
1. Go to Google Cloud Console ‚Üí APIs & Services ‚Üí Library
2. Search for "Google+ API"
3. Click Enable
4. Wait a few minutes and try again

### Error: "Invalid client"

**Problem:** Client ID or Secret is incorrect

**Solution:**
1. Go to Google Cloud Console ‚Üí Credentials
2. Copy the Client ID and Secret again
3. Go to Supabase Dashboard ‚Üí Authentication ‚Üí Providers ‚Üí Google
4. Paste the correct credentials
5. Save and try again

### Session not persisting

**Problem:** Cookies not being saved

**Solution:**
1. Check browser settings allow cookies
2. Verify Supabase URL is correct in `.env`
3. Check for CORS issues in browser console
4. Try in incognito mode to rule out extensions

---

## üìù Configuration Checklist

### Google Cloud Console

- [ ] Project created
- [ ] Google+ API enabled
- [ ] OAuth consent screen configured
- [ ] OAuth 2.0 credentials created
- [ ] Redirect URIs added
- [ ] Client ID and Secret copied

### Supabase Dashboard

- [ ] Google provider enabled
- [ ] Client ID added
- [ ] Client Secret added
- [ ] Redirect URLs configured
- [ ] Site URL configured

### Application

- [ ] Environment variables set
- [ ] AuthContext implemented
- [ ] Routes protected
- [ ] Login page created
- [ ] Auth callback handler created

---

## üîê Security Best Practices

### Protect Your Credentials

1. **Never commit credentials to Git**
   - Use `.env` files
   - Add `.env` to `.gitignore`
   - Use environment variables in production

2. **Rotate credentials regularly**
   - Change Client Secret periodically
   - Update in both Google Console and Supabase

3. **Limit redirect URIs**
   - Only add necessary URIs
   - Remove development URIs in production

4. **Monitor usage**
   - Check Google Cloud Console for unusual activity
   - Review Supabase auth logs regularly

### Production Considerations

1. **Publish OAuth consent screen**
   - Required for production use
   - Allows any Google user to sign in
   - Requires verification for sensitive scopes

2. **Use HTTPS**
   - Always use HTTPS in production
   - Required for OAuth security

3. **Configure proper CORS**
   - Limit allowed origins
   - Set proper headers

4. **Enable rate limiting**
   - Protect against abuse
   - Configure in Supabase

---

## üéØ Environment Variables

### Required Variables

```env
# Supabase Configuration
VITE_SUPABASE_URL=https://itazzlbcxisavqxvkmoe.supabase.co
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key

# Application Configuration
VITE_APP_ID=chasemycareer
VITE_API_ENV=production
```

### Where to Find Values

**VITE_SUPABASE_URL:**
- Supabase Dashboard ‚Üí Settings ‚Üí API ‚Üí Project URL

**VITE_SUPABASE_ANON_KEY:**
- Supabase Dashboard ‚Üí Settings ‚Üí API ‚Üí Project API keys ‚Üí anon public

---

## üì± Testing Checklist

### Functionality Tests

- [ ] Can access landing page
- [ ] Can click "Get Started" button
- [ ] Redirected to login page
- [ ] Can click "Continue with Google"
- [ ] Google consent screen appears
- [ ] Can select Google account
- [ ] Can grant permissions
- [ ] Redirected back to app
- [ ] Profile created in database
- [ ] User info displayed in header
- [ ] Can access calendar
- [ ] Can sign out
- [ ] Session cleared after sign out

### UI Tests

- [ ] Landing page displays correctly
- [ ] Login page displays correctly
- [ ] Loading states work
- [ ] Error messages display
- [ ] Header shows user info
- [ ] Mobile menu works
- [ ] Avatar displays correctly

### Security Tests

- [ ] Cannot access calendar without auth
- [ ] Cannot access day pages without auth
- [ ] Cannot access congratulations without auth
- [ ] Redirected to login when not authenticated
- [ ] Session persists across page refreshes
- [ ] Sign out clears session completely

---

## üöÄ Deployment

### Before Deploying

1. **Update redirect URIs**
   - Add production domain to Google Console
   - Add production domain to Supabase

2. **Update environment variables**
   - Set production Supabase URL
   - Set production Supabase key

3. **Test locally first**
   - Verify everything works in development
   - Fix any issues before deploying

### After Deploying

1. **Test authentication flow**
   - Sign in with Google
   - Verify profile creation
   - Check user info display
   - Test sign out

2. **Monitor for errors**
   - Check browser console
   - Check Supabase logs
   - Check Google Cloud Console

3. **Verify security**
   - Test route protection
   - Verify RLS policies
   - Check for unauthorized access

---

## üìö Additional Resources

### Documentation

- [Supabase Auth Documentation](https://supabase.com/docs/guides/auth)
- [Google OAuth 2.0 Documentation](https://developers.google.com/identity/protocols/oauth2)
- [Google Cloud Console](https://console.cloud.google.com)

### Support

- [Supabase Discord](https://discord.supabase.com)
- [Supabase GitHub](https://github.com/supabase/supabase)
- [Google OAuth Support](https://support.google.com/cloud)

---

## ‚úÖ Quick Reference

### Google Cloud Console URLs

- **Console**: https://console.cloud.google.com
- **APIs & Services**: https://console.cloud.google.com/apis
- **Credentials**: https://console.cloud.google.com/apis/credentials
- **OAuth Consent**: https://console.cloud.google.com/apis/credentials/consent

### Supabase Dashboard URLs

- **Dashboard**: https://app.supabase.com
- **Authentication**: https://app.supabase.com/project/itazzlbcxisavqxvkmoe/auth/users
- **Providers**: https://app.supabase.com/project/itazzlbcxisavqxvkmoe/auth/providers

### Important Redirect URI

```
https://itazzlbcxisavqxvkmoe.supabase.co/auth/v1/callback
```

**This is the most important redirect URI - make sure it's added to Google Console!**

---

## üéâ Success!

Once you've completed all steps, your Google OAuth authentication should be working!

Users can now:
- ‚úÖ Sign in with their Google account
- ‚úÖ Access the 50-day career program
- ‚úÖ Have their progress tracked
- ‚úÖ Sign out securely

---

**üéØ Chase My Career - Your 50-Day Career Chase üéØ**

**Google OAuth authentication is ready to go!** üöÄ
