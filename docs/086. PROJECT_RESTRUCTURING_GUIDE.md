# Project Restructuring Guide

## üìÅ New Structure Overview

The project has been reorganized into separate frontend and backend folders for better maintainability and independent deployment.

```
chasemycareer/
‚îú‚îÄ‚îÄ frontend/                 # React application
‚îÇ   ‚îú‚îÄ‚îÄ src/                 # All React source code
‚îÇ   ‚îú‚îÄ‚îÄ public/              # Static assets
‚îÇ   ‚îú‚îÄ‚îÄ package.json         # Frontend dependencies
‚îÇ   ‚îú‚îÄ‚îÄ vite.config.ts       # Vite configuration
‚îÇ   ‚îú‚îÄ‚îÄ tailwind.config.js   # Tailwind configuration
‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.json        # TypeScript configuration
‚îÇ   ‚îú‚îÄ‚îÄ .env.local           # Frontend environment variables
‚îÇ   ‚îî‚îÄ‚îÄ README.md            # Frontend documentation
‚îÇ
‚îú‚îÄ‚îÄ backend/                 # Supabase backend
‚îÇ   ‚îú‚îÄ‚îÄ supabase/            # Supabase configuration
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ functions/       # Edge functions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ migrations/      # Database migrations
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.toml      # Supabase config
‚îÇ   ‚îú‚îÄ‚îÄ package.json         # Backend dependencies
‚îÇ   ‚îú‚îÄ‚îÄ .env                 # Backend environment variables
‚îÇ   ‚îî‚îÄ‚îÄ README.md            # Backend documentation
‚îÇ
‚îú‚îÄ‚îÄ docs/                    # Project documentation
‚îú‚îÄ‚îÄ workers/                 # Cloudflare Workers (optional)
‚îú‚îÄ‚îÄ package.json             # Root package.json (run both)
‚îú‚îÄ‚îÄ .env.example             # Environment template
‚îú‚îÄ‚îÄ LOCAL_DEVELOPMENT_GUIDE.md  # Setup instructions
‚îî‚îÄ‚îÄ README.md                # Main project documentation
```

## üîÑ Migration Steps

### Current State

Your project currently has everything in the root directory. We need to move files to the appropriate folders.

### Step 1: Move Frontend Files

```bash
# Move source code
mv src frontend/
mv public frontend/

# Move configuration files
mv vite.config.ts frontend/
mv vite.config.dev.ts frontend/
mv tailwind.config.js frontend/
mv postcss.config.js frontend/
mv tsconfig.json frontend/
mv tsconfig.app.json frontend/
mv tsconfig.node.json frontend/
mv tsconfig.check.json frontend/
mv components.json frontend/
mv biome.json frontend/
mv index.html frontend/

# Copy package.json (we'll modify it)
cp package.json frontend/package.json

# Move environment template
cp .env.template frontend/.env.example
```

### Step 2: Move Backend Files

```bash
# Move Supabase directory
mv supabase backend/

# Create backend package.json
cat > backend/package.json << 'EOF'
{
  "name": "chasemycareer-backend",
  "version": "1.0.0",
  "description": "ChaseMyCareer Supabase backend",
  "scripts": {
    "start": "npx supabase start",
    "stop": "npx supabase stop",
    "status": "npx supabase status",
    "db:push": "npx supabase db push",
    "db:reset": "npx supabase db reset",
    "db:lint": "npx supabase db lint",
    "migration:new": "npx supabase migration new",
    "functions:serve": "npx supabase functions serve",
    "functions:deploy": "npx supabase functions deploy"
  },
  "dependencies": {
    "supabase": "^1.142.2"
  }
}
EOF

# Create backend .env template
cat > backend/.env.example << 'EOF'
# Supabase Project
SUPABASE_PROJECT_REF=your-project-ref
SUPABASE_DB_PASSWORD=your-db-password
SUPABASE_ACCESS_TOKEN=your-access-token

# Local Development
SUPABASE_DB_PORT=54322
SUPABASE_STUDIO_PORT=54323
SUPABASE_API_PORT=54321
EOF
```

### Step 3: Move Cloudflare Workers (Optional)

```bash
# Workers are already in workers/ directory
# Just ensure wrangler.toml is at root or in workers/
```

### Step 4: Create Root Package.json

```bash
cat > package.json << 'EOF'
{
  "name": "chasemycareer",
  "version": "1.0.0",
  "description": "ChaseMyCareer - 50-Day Job Search Platform",
  "private": true,
  "workspaces": [
    "frontend",
    "backend"
  ],
  "scripts": {
    "install:all": "npm install && cd frontend && npm install && cd ../backend && npm install",
    "dev": "concurrently \"npm run dev:frontend\" \"npm run dev:backend\"",
    "dev:frontend": "cd frontend && npm run dev",
    "dev:backend": "cd backend && npm run start",
    "build": "cd frontend && npm run build",
    "lint": "cd frontend && npm run lint",
    "test": "npm run lint",
    "clean": "rm -rf frontend/node_modules frontend/dist backend/node_modules node_modules"
  },
  "devDependencies": {
    "concurrently": "^8.2.2"
  },
  "engines": {
    "node": ">=18.0.0",
    "npm": ">=9.0.0"
  }
}
EOF
```

### Step 5: Update Frontend Package.json

Edit `frontend/package.json`:

```json
{
  "name": "chasemycareer-frontend",
  "version": "1.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "lint": "tsgo -p tsconfig.check.json && npx biome lint && npx tailwindcss -i ./src/index.css -o /dev/null 2>&1 | grep -E '^(CssSyntaxError|Error):.*' || true",
    "type-check": "tsc --noEmit",
    "format": "npx biome format --write ."
  },
  "dependencies": {
    // ... keep all existing dependencies
  },
  "devDependencies": {
    // ... keep all existing devDependencies
  }
}
```

## üöÄ Installation After Restructuring

### Option 1: Install Everything at Once

```bash
# From project root
npm run install:all
```

This will:
1. Install root dependencies (concurrently)
2. Install frontend dependencies
3. Install backend dependencies

### Option 2: Install Separately

```bash
# Install frontend
cd frontend
npm install

# Install backend
cd ../backend
npm install

# Install root (for running both)
cd ..
npm install
```

## üèÉ Running After Restructuring

### Option 1: Run Both Together

```bash
# From project root
npm run dev
```

This starts:
- Frontend at http://localhost:5173
- Backend (Supabase) at http://localhost:54323

### Option 2: Run Separately

**Terminal 1 - Frontend:**
```bash
cd frontend
npm run dev
```

**Terminal 2 - Backend:**
```bash
cd backend
npm run start
```

## üìù Configuration Updates

### Frontend Configuration

1. **Environment Variables** (`frontend/.env.local`):
```env
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key
VITE_GOOGLE_CLIENT_ID=your-google-client-id
VITE_APP_ID=chasemycareer
VITE_API_ENV=development
```

2. **Vite Config** (`frontend/vite.config.ts`):
- No changes needed
- All paths are relative to frontend/

3. **Tailwind Config** (`frontend/tailwind.config.js`):
- Update content paths if needed:
```javascript
content: [
  "./index.html",
  "./src/**/*.{js,ts,jsx,tsx}",
],
```

### Backend Configuration

1. **Environment Variables** (`backend/.env`):
```env
SUPABASE_PROJECT_REF=your-project-ref
SUPABASE_DB_PASSWORD=your-db-password
SUPABASE_ACCESS_TOKEN=your-access-token
```

2. **Supabase Config** (`backend/supabase/config.toml`):
- No changes needed
- Already configured correctly

## ‚úÖ Verification Checklist

After restructuring, verify:

- [ ] Frontend folder exists with all source code
- [ ] Backend folder exists with supabase directory
- [ ] Root package.json exists with workspace configuration
- [ ] Frontend package.json has correct scripts
- [ ] Backend package.json has correct scripts
- [ ] Environment files are in correct locations
- [ ] Can install dependencies: `npm run install:all`
- [ ] Can run frontend: `cd frontend && npm run dev`
- [ ] Can run backend: `cd backend && npm run start`
- [ ] Can run both: `npm run dev` (from root)
- [ ] Frontend loads at http://localhost:5173
- [ ] Supabase Studio loads at http://localhost:54323
- [ ] No import errors in console
- [ ] Can log in to application
- [ ] Database queries work

## üîß Troubleshooting

### Issue: Module not found errors

**Solution:**
```bash
cd frontend
rm -rf node_modules package-lock.json
npm install
```

### Issue: Supabase won't start

**Solution:**
```bash
cd backend
npx supabase stop
npx supabase start
```

### Issue: Port conflicts

**Solution:**
Edit `backend/supabase/config.toml` and change ports:
```toml
[db]
port = 54322

[studio]
port = 54323

[api]
port = 54321
```

### Issue: Environment variables not working

**Solution:**
- Frontend: Ensure file is named `.env.local` in `frontend/`
- Backend: Ensure file is named `.env` in `backend/`
- Restart dev servers after changes

## üìö Documentation Updates

After restructuring, documentation is organized as:

- **Root README.md** - Project overview and quick start
- **frontend/README.md** - Frontend-specific documentation
- **backend/README.md** - Backend-specific documentation
- **LOCAL_DEVELOPMENT_GUIDE.md** - Detailed setup instructions
- **CLOUDFLARE_*.md** - Cloudflare integration guides

## üéØ Benefits of New Structure

### Separation of Concerns
- Frontend and backend are clearly separated
- Each can be developed independently
- Easier to understand project structure

### Independent Deployment
- Deploy frontend to Cloudflare Pages
- Deploy backend to Supabase
- Deploy workers separately

### Better Collaboration
- Frontend developers work in `frontend/`
- Backend developers work in `backend/`
- Clear ownership of code

### Easier Maintenance
- Dependencies are separated
- Configuration is isolated
- Testing is more focused

### Scalability
- Can add more services (mobile app, admin panel)
- Each service has its own folder
- Monorepo structure with workspaces

## üöÄ Next Steps

1. **Complete the migration** using steps above
2. **Test thoroughly** to ensure everything works
3. **Update CI/CD** pipelines if you have them
4. **Update documentation** with any project-specific changes
5. **Commit changes** to version control

## üìû Need Help?

If you encounter issues:
1. Check the [LOCAL_DEVELOPMENT_GUIDE.md](./LOCAL_DEVELOPMENT_GUIDE.md)
2. Review frontend/README.md for frontend issues
3. Review backend/README.md for backend issues
4. Verify all files are in correct locations
5. Ensure all dependencies are installed

---

**Note:** This restructuring is non-breaking. Your application will work exactly the same way, just with better organization!
