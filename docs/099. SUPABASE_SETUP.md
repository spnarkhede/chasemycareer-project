# üóÑÔ∏è Complete Supabase Database Setup Guide

## Overview

This guide will walk you through setting up Supabase for the Chase My Career application, including database schema, authentication, Row Level Security, and integration with your frontend.

---

## Step 1: Create Supabase Project

### 1.1 Sign Up for Supabase

1. Go to https://supabase.com
2. Click "Start your project"
3. Sign up with GitHub (recommended) or email
4. Verify your email if needed

### 1.2 Create New Project

1. Click "New Project"
2. Select your organization (or create one)
3. Fill in project details:
   - **Name:** `chase-my-career` or `chasemycareer`
   - **Database Password:** Generate a strong password (save it securely!)
   - **Region:** Choose closest to your users (e.g., US East, EU West)
   - **Pricing Plan:** Free tier is sufficient to start
4. Click "Create new project"
5. Wait 2-3 minutes for project to be provisioned

### 1.3 Get Project Credentials

Once project is ready:

1. Go to Project Settings (gear icon) ‚Üí API
2. Copy these values:
   - **Project URL:** `https://xxxxx.supabase.co`
   - **anon/public key:** `eyJhbGc...` (long string)
   - **service_role key:** `eyJhbGc...` (keep this secret!)

Save these in a secure location. You'll need them later.

---

## Step 2: Database Schema Setup

### 2.1 Access SQL Editor

1. In Supabase Dashboard, click "SQL Editor" in left sidebar
2. Click "New query"

### 2.2 Run Initial Schema Migration

Copy and paste this SQL to create all tables:

```sql
-- Enable UUID extension
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

-- Create profiles table
CREATE TABLE IF NOT EXISTS profiles (
  user_id UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE,
  full_name TEXT NOT NULL,
  email TEXT NOT NULL,
  target_role TEXT,
  experience_level TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Create daily_tasks_template table (master curriculum)
CREATE TABLE IF NOT EXISTS daily_tasks_template (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  day_number INTEGER NOT NULL UNIQUE,
  title TEXT NOT NULL,
  description TEXT NOT NULL,
  category TEXT NOT NULL,
  week_number INTEGER NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Create daily_tasks table (user instances)
CREATE TABLE IF NOT EXISTS daily_tasks (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  day_number INTEGER NOT NULL,
  title TEXT NOT NULL,
  description TEXT NOT NULL,
  category TEXT NOT NULL,
  completed BOOLEAN DEFAULT FALSE,
  completed_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(user_id, day_number)
);

-- Create job_applications table
CREATE TABLE IF NOT EXISTS job_applications (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  company_name TEXT NOT NULL,
  position_title TEXT NOT NULL,
  status TEXT NOT NULL DEFAULT 'applied',
  applied_date DATE,
  job_url TEXT,
  location TEXT,
  salary_range TEXT,
  notes TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Create interviews table
CREATE TABLE IF NOT EXISTS interviews (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  company_name TEXT NOT NULL,
  position_title TEXT NOT NULL,
  interview_date TIMESTAMPTZ NOT NULL,
  interview_type TEXT NOT NULL,
  status TEXT NOT NULL DEFAULT 'scheduled',
  notes TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Create networking_contacts table
CREATE TABLE IF NOT EXISTS networking_contacts (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  company TEXT,
  position TEXT,
  email TEXT,
  linkedin_url TEXT,
  phone TEXT,
  notes TEXT,
  last_contact_date DATE,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Create documents table
CREATE TABLE IF NOT EXISTS documents (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  document_type TEXT NOT NULL,
  file_url TEXT,
  content TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Create admin_users table
CREATE TABLE IF NOT EXISTS admin_users (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE UNIQUE,
  role TEXT NOT NULL DEFAULT 'admin',
  permissions JSONB DEFAULT '{"view_users": true, "edit_users": true, "send_messages": true}'::jsonb,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Create user_messages table
CREATE TABLE IF NOT EXISTS user_messages (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  from_user_id UUID REFERENCES auth.users(id) ON DELETE SET NULL,
  to_user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  subject TEXT NOT NULL,
  message TEXT NOT NULL,
  read BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Create user_activity table
CREATE TABLE IF NOT EXISTS user_activity (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  activity_type TEXT NOT NULL,
  activity_data JSONB,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Create achievements table
CREATE TABLE IF NOT EXISTS achievements (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  achievement_type TEXT NOT NULL,
  achievement_name TEXT NOT NULL,
  achieved_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(user_id, achievement_type)
);

-- Create indexes for better performance
CREATE INDEX IF NOT EXISTS idx_daily_tasks_user_id ON daily_tasks(user_id);
CREATE INDEX IF NOT EXISTS idx_daily_tasks_completed ON daily_tasks(completed);
CREATE INDEX IF NOT EXISTS idx_job_applications_user_id ON job_applications(user_id);
CREATE INDEX IF NOT EXISTS idx_job_applications_status ON job_applications(status);
CREATE INDEX IF NOT EXISTS idx_interviews_user_id ON interviews(user_id);
CREATE INDEX IF NOT EXISTS idx_interviews_date ON interviews(interview_date);
CREATE INDEX IF NOT EXISTS idx_networking_contacts_user_id ON networking_contacts(user_id);
CREATE INDEX IF NOT EXISTS idx_user_messages_to_user ON user_messages(to_user_id);
CREATE INDEX IF NOT EXISTS idx_user_activity_user_id ON user_activity(user_id);
```

Click "Run" to execute the SQL.

### 2.3 Populate 50-Day Curriculum

Run this SQL to populate the daily_tasks_template table:

```sql
-- Insert 50 days of curriculum
INSERT INTO daily_tasks_template (day_number, title, description, category, week_number) VALUES
-- Week 1: Foundation & Self-Assessment
(1, 'Career Goals Definition', 'Define your short-term and long-term career goals. Write down where you want to be in 1, 3, and 5 years.', 'preparation', 1),
(2, 'Skills Inventory', 'Create a comprehensive list of your technical and soft skills. Rate your proficiency in each.', 'preparation', 1),
(3, 'Industry Research', 'Research 5 companies in your target industry. Understand their culture, products, and hiring practices.', 'research', 1),
(4, 'Resume Audit', 'Review your current resume. Identify gaps, outdated information, and areas for improvement.', 'preparation', 1),
(5, 'LinkedIn Profile Optimization', 'Update your LinkedIn profile with a professional photo, compelling headline, and detailed experience.', 'networking', 1),
(6, 'Personal Brand Statement', 'Craft a 30-second elevator pitch that summarizes who you are and what you offer.', 'preparation', 1),
(7, 'Week 1 Review', 'Review your progress from Week 1. Adjust your goals and strategies as needed.', 'review', 1),

-- Week 2: Resume & Cover Letter Mastery
(8, 'Resume Format Selection', 'Choose the best resume format for your situation: chronological, functional, or combination.', 'application', 2),
(9, 'Achievement Quantification', 'Rewrite your job descriptions to focus on achievements with quantifiable results.', 'application', 2),
(10, 'Keyword Optimization', 'Research job postings and incorporate relevant keywords into your resume for ATS systems.', 'application', 2),
(11, 'Cover Letter Template', 'Create a flexible cover letter template that can be customized for each application.', 'application', 2),
(12, 'Portfolio Development', 'Start building or updating your online portfolio with your best work samples.', 'preparation', 2),
(13, 'Resume Review', 'Have 2-3 people review your resume and provide feedback. Make necessary revisions.', 'application', 2),
(14, 'Week 2 Review', 'Finalize your resume and cover letter templates. Ensure they are error-free and compelling.', 'review', 2),

-- Week 3: Job Search Strategy
(15, 'Job Board Setup', 'Create accounts on major job boards: LinkedIn, Indeed, Glassdoor, and industry-specific sites.', 'research', 3),
(16, 'Company Target List', 'Create a list of 20 target companies where you would like to work.', 'research', 3),
(17, 'Application Tracking System', 'Set up a system to track your applications, follow-ups, and responses.', 'organization', 3),
(18, 'Daily Application Goal', 'Apply to 3-5 jobs that match your criteria. Quality over quantity.', 'application', 3),
(19, 'Recruiter Outreach', 'Identify and connect with 5 recruiters in your industry on LinkedIn.', 'networking', 3),
(20, 'Job Alert Setup', 'Set up job alerts for your target roles and companies to receive daily notifications.', 'research', 3),
(21, 'Week 3 Review', 'Review your application strategy. Track response rates and adjust approach if needed.', 'review', 3),

-- Week 4: Networking & Online Presence
(22, 'LinkedIn Connections', 'Send personalized connection requests to 10 people in your target industry.', 'networking', 4),
(23, 'LinkedIn Engagement', 'Comment on and share 5 industry-related posts. Establish your thought leadership.', 'networking', 4),
(24, 'Alumni Network', 'Reach out to 3 alumni from your school who work in your target field.', 'networking', 4),
(25, 'Professional Associations', 'Join 2 professional associations or online communities in your industry.', 'networking', 4),
(26, 'Informational Interviews', 'Request informational interviews with 3 professionals in your desired role.', 'networking', 4),
(27, 'Online Presence Audit', 'Google yourself and clean up any unprofessional content. Enhance your digital footprint.', 'preparation', 4),
(28, 'Week 4 Review', 'Evaluate your networking efforts. Follow up with new connections and maintain relationships.', 'review', 4),

-- Week 5: Interview Preparation
(29, 'Common Questions Practice', 'Prepare answers for 20 common interview questions. Practice out loud.', 'interview', 5),
(30, 'STAR Method Mastery', 'Prepare 10 stories using the STAR method (Situation, Task, Action, Result).', 'interview', 5),
(31, 'Behavioral Questions', 'Practice answering behavioral questions about teamwork, conflict, and leadership.', 'interview', 5),
(32, 'Technical Prep', 'Review technical concepts relevant to your field. Practice coding or case studies.', 'interview', 5),
(33, 'Mock Interview', 'Conduct a mock interview with a friend or use online platforms like Pramp.', 'interview', 5),
(34, 'Questions to Ask', 'Prepare 10 thoughtful questions to ask interviewers about the role and company.', 'interview', 5),
(35, 'Week 5 Review', 'Review your interview performance. Identify areas for improvement and practice more.', 'review', 5),

-- Week 6: Advanced Interview Skills
(36, 'Salary Negotiation Research', 'Research salary ranges for your target role using Glassdoor, Payscale, and Levels.fyi.', 'interview', 6),
(37, 'Negotiation Practice', 'Practice salary negotiation conversations. Know your worth and be ready to advocate for it.', 'interview', 6),
(38, 'Virtual Interview Setup', 'Test your video interview setup: lighting, background, camera, and audio.', 'interview', 6),
(39, 'Body Language', 'Practice confident body language: eye contact, posture, and hand gestures.', 'interview', 6),
(40, 'Follow-up Strategy', 'Prepare thank-you email templates for after interviews. Send within 24 hours.', 'interview', 6),
(41, 'Reference Preparation', 'Contact 3-5 professional references and brief them on your job search.', 'preparation', 6),
(42, 'Week 6 Review', 'Assess your interview readiness. Continue practicing and refining your approach.', 'review', 6),

-- Week 7: Momentum & Persistence
(43, 'Application Surge', 'Apply to 10 jobs today. Increase your activity to generate more opportunities.', 'application', 7),
(44, 'Follow-up Campaign', 'Follow up on all pending applications. Send polite inquiry emails.', 'application', 7),
(45, 'Referral Requests', 'Ask your network for referrals to open positions at their companies.', 'networking', 7),
(46, 'Skills Gap Analysis', 'Identify any skills gaps and start online courses or certifications to fill them.', 'preparation', 7),
(47, 'Recruiter Follow-up', 'Follow up with recruiters you contacted earlier. Maintain visibility.', 'networking', 7),
(48, 'Mindset & Motivation', 'Practice self-care and maintain a positive mindset. Job searching is a marathon, not a sprint.', 'preparation', 7),
(49, 'Week 7 Review', 'Celebrate small wins. Review your progress and stay motivated for the final push.', 'review', 7),

-- Week 8: Final Push
(50, 'Offer Evaluation & Celebration', 'Evaluate job offers carefully. Consider salary, benefits, culture, and growth opportunities. Celebrate your success!', 'review', 8)
ON CONFLICT (day_number) DO NOTHING;
```

Click "Run" to execute.

---

## Step 3: Database Functions

### 3.1 Create Helper Functions

Run this SQL to create database functions:

```sql
-- Function to initialize user daily tasks from template
CREATE OR REPLACE FUNCTION initialize_user_daily_tasks()
RETURNS TRIGGER AS $$
BEGIN
  INSERT INTO daily_tasks (user_id, day_number, title, description, category)
  SELECT NEW.id, day_number, title, description, category
  FROM daily_tasks_template
  ORDER BY day_number;
  
  RETURN NEW;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- Function to get user statistics
CREATE OR REPLACE FUNCTION get_user_statistics(p_user_id UUID)
RETURNS JSON AS $$
DECLARE
  result JSON;
BEGIN
  SELECT json_build_object(
    'total_tasks', COUNT(*),
    'completed_tasks', COUNT(*) FILTER (WHERE completed = TRUE),
    'completion_rate', ROUND((COUNT(*) FILTER (WHERE completed = TRUE)::NUMERIC / COUNT(*)::NUMERIC) * 100, 2),
    'current_day', COALESCE(MIN(day_number) FILTER (WHERE completed = FALSE), 50),
    'total_applications', (SELECT COUNT(*) FROM job_applications WHERE user_id = p_user_id),
    'total_interviews', (SELECT COUNT(*) FROM interviews WHERE user_id = p_user_id),
    'total_contacts', (SELECT COUNT(*) FROM networking_contacts WHERE user_id = p_user_id)
  ) INTO result
  FROM daily_tasks
  WHERE user_id = p_user_id;
  
  RETURN result;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- Function to check if user is admin
CREATE OR REPLACE FUNCTION is_admin(p_user_id UUID)
RETURNS BOOLEAN AS $$
BEGIN
  RETURN EXISTS (
    SELECT 1 FROM admin_users WHERE user_id = p_user_id
  );
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- Function to get admin dashboard stats
CREATE OR REPLACE FUNCTION get_admin_dashboard_stats()
RETURNS JSON AS $$
DECLARE
  result JSON;
BEGIN
  SELECT json_build_object(
    'total_users', (SELECT COUNT(*) FROM auth.users),
    'active_users', (SELECT COUNT(DISTINCT user_id) FROM user_activity WHERE created_at > NOW() - INTERVAL '7 days'),
    'total_applications', (SELECT COUNT(*) FROM job_applications),
    'total_interviews', (SELECT COUNT(*) FROM interviews),
    'avg_completion_rate', (
      SELECT ROUND(AVG((SELECT COUNT(*) FILTER (WHERE completed = TRUE)::NUMERIC / COUNT(*)::NUMERIC * 100 FROM daily_tasks WHERE user_id = auth.users.id)), 2)
      FROM auth.users
    ),
    'completed_programs', (
      SELECT COUNT(DISTINCT user_id) 
      FROM daily_tasks 
      GROUP BY user_id 
      HAVING COUNT(*) FILTER (WHERE completed = TRUE) = 50
    )
  ) INTO result;
  
  RETURN result;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;
```

### 3.2 Create Triggers

Run this SQL to create triggers:

```sql
-- Trigger to auto-create daily tasks for new users
CREATE TRIGGER on_auth_user_created
  AFTER INSERT ON auth.users
  FOR EACH ROW
  EXECUTE FUNCTION initialize_user_daily_tasks();

-- Function to update updated_at timestamp
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
  NEW.updated_at = NOW();
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

-- Triggers for updated_at
CREATE TRIGGER update_profiles_updated_at BEFORE UPDATE ON profiles
  FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

CREATE TRIGGER update_job_applications_updated_at BEFORE UPDATE ON job_applications
  FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

CREATE TRIGGER update_interviews_updated_at BEFORE UPDATE ON interviews
  FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

CREATE TRIGGER update_networking_contacts_updated_at BEFORE UPDATE ON networking_contacts
  FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

CREATE TRIGGER update_documents_updated_at BEFORE UPDATE ON documents
  FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
```

---

## Step 4: Row Level Security (RLS)

### 4.1 Enable RLS on All Tables

Run this SQL:

```sql
-- Enable RLS on all tables
ALTER TABLE profiles ENABLE ROW LEVEL SECURITY;
ALTER TABLE daily_tasks ENABLE ROW LEVEL SECURITY;
ALTER TABLE job_applications ENABLE ROW LEVEL SECURITY;
ALTER TABLE interviews ENABLE ROW LEVEL SECURITY;
ALTER TABLE networking_contacts ENABLE ROW LEVEL SECURITY;
ALTER TABLE documents ENABLE ROW LEVEL SECURITY;
ALTER TABLE admin_users ENABLE ROW LEVEL SECURITY;
ALTER TABLE user_messages ENABLE ROW LEVEL SECURITY;
ALTER TABLE user_activity ENABLE ROW LEVEL SECURITY;
ALTER TABLE achievements ENABLE ROW LEVEL SECURITY;
```

### 4.2 Create RLS Policies

Run this SQL to create security policies:

```sql
-- Profiles policies
CREATE POLICY "Users can view own profile" ON profiles
  FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "Users can update own profile" ON profiles
  FOR UPDATE USING (auth.uid() = user_id);

CREATE POLICY "Users can insert own profile" ON profiles
  FOR INSERT WITH CHECK (auth.uid() = user_id);

-- Daily tasks policies
CREATE POLICY "Users can view own tasks" ON daily_tasks
  FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "Users can update own tasks" ON daily_tasks
  FOR UPDATE USING (auth.uid() = user_id);

-- Job applications policies
CREATE POLICY "Users can view own applications" ON job_applications
  FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "Users can insert own applications" ON job_applications
  FOR INSERT WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update own applications" ON job_applications
  FOR UPDATE USING (auth.uid() = user_id);

CREATE POLICY "Users can delete own applications" ON job_applications
  FOR DELETE USING (auth.uid() = user_id);

-- Interviews policies
CREATE POLICY "Users can view own interviews" ON interviews
  FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "Users can insert own interviews" ON interviews
  FOR INSERT WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update own interviews" ON interviews
  FOR UPDATE USING (auth.uid() = user_id);

CREATE POLICY "Users can delete own interviews" ON interviews
  FOR DELETE USING (auth.uid() = user_id);

-- Networking contacts policies
CREATE POLICY "Users can view own contacts" ON networking_contacts
  FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "Users can insert own contacts" ON networking_contacts
  FOR INSERT WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update own contacts" ON networking_contacts
  FOR UPDATE USING (auth.uid() = user_id);

CREATE POLICY "Users can delete own contacts" ON networking_contacts
  FOR DELETE USING (auth.uid() = user_id);

-- Documents policies
CREATE POLICY "Users can view own documents" ON documents
  FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "Users can insert own documents" ON documents
  FOR INSERT WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update own documents" ON documents
  FOR UPDATE USING (auth.uid() = user_id);

CREATE POLICY "Users can delete own documents" ON documents
  FOR DELETE USING (auth.uid() = user_id);

-- Admin users policies
CREATE POLICY "Admins can view admin users" ON admin_users
  FOR SELECT USING (is_admin(auth.uid()));

-- User messages policies
CREATE POLICY "Users can view own messages" ON user_messages
  FOR SELECT USING (auth.uid() = to_user_id OR auth.uid() = from_user_id);

CREATE POLICY "Admins can send messages" ON user_messages
  FOR INSERT WITH CHECK (is_admin(auth.uid()));

-- User activity policies
CREATE POLICY "Users can view own activity" ON user_activity
  FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "Users can insert own activity" ON user_activity
  FOR INSERT WITH CHECK (auth.uid() = user_id);

-- Achievements policies
CREATE POLICY "Users can view own achievements" ON achievements
  FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "Users can insert own achievements" ON achievements
  FOR INSERT WITH CHECK (auth.uid() = user_id);

-- Daily tasks template is public (read-only)
ALTER TABLE daily_tasks_template ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Anyone can view tasks template" ON daily_tasks_template
  FOR SELECT USING (true);
```

---

## Step 5: Authentication Configuration

### 5.1 Configure Email Authentication

1. Go to Authentication ‚Üí Providers
2. Email is enabled by default
3. Configure email templates (optional):
   - Go to Authentication ‚Üí Email Templates
   - Customize "Confirm signup", "Magic Link", "Change Email", "Reset Password"

### 5.2 Configure Google OAuth (Optional)

1. **Create Google OAuth Credentials:**
   - Go to https://console.cloud.google.com/
   - Create a new project or select existing
   - Enable Google+ API
   - Go to Credentials ‚Üí Create Credentials ‚Üí OAuth 2.0 Client ID
   - Application type: Web application
   - Authorized redirect URIs: `https://xxxxx.supabase.co/auth/v1/callback`
   - Copy Client ID and Client Secret

2. **Configure in Supabase:**
   - Go to Authentication ‚Üí Providers
   - Enable Google
   - Paste Client ID and Client Secret
   - Click "Save"

### 5.3 Configure Site URL and Redirect URLs

1. Go to Authentication ‚Üí URL Configuration
2. Set Site URL: `https://www.chasemycareer.com` (or your domain)
3. Add Redirect URLs:
   - `http://localhost:5173/**` (for local development)
   - `https://www.chasemycareer.com/**`
   - `https://chasemycareer.com/**`
   - Any other domains you'll use

---

## Step 6: Create Admin User

### 6.1 Register First User

1. Use your frontend to register a new user
2. Or use Supabase Dashboard ‚Üí Authentication ‚Üí Users ‚Üí Add user

### 6.2 Make User an Admin

1. Go to SQL Editor
2. Run this SQL (replace with your user ID):

```sql
-- Get your user ID first
SELECT id, email FROM auth.users WHERE email = 'your-email@example.com';

-- Make user an admin (replace 'your-user-id' with actual ID)
INSERT INTO admin_users (user_id, role, permissions)
VALUES (
  'your-user-id',
  'admin',
  '{"view_users": true, "edit_users": true, "send_messages": true}'::jsonb
);
```

---

## Step 7: Frontend Integration

### 7.1 Install Supabase Client

```bash
cd /workspace/chasemycareer/frontend
npm install @supabase/supabase-js
```

### 7.2 Create Environment Variables

Create `.env` file in `frontend/` directory:

```env
VITE_SUPABASE_URL=https://xxxxx.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGc...your-anon-key
```

### 7.3 Initialize Supabase Client

The client is already configured in `src/db/supabase.ts`:

```typescript
import { createClient } from '@supabase/supabase-js';

const supabaseUrl = import.meta.env.VITE_SUPABASE_URL;
const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY;

export const supabase = createClient(supabaseUrl, supabaseAnonKey);
```

---

## Step 8: Test Database Connection

### 8.1 Test from Frontend

1. Start your frontend:
```bash
cd frontend
npm run dev
```

2. Open browser console
3. Test connection:
```javascript
// In browser console
const { data, error } = await supabase.from('daily_tasks_template').select('*').limit(1);
console.log(data, error);
```

Should return one task from the template.

### 8.2 Test Authentication

1. Register a new user through your frontend
2. Check Supabase Dashboard ‚Üí Authentication ‚Üí Users
3. Verify user appears in the list
4. Check Database ‚Üí daily_tasks table
5. Verify 50 tasks were created for the user

---

## Step 9: Database Backups

### 9.1 Enable Automatic Backups

Supabase automatically backs up your database daily (on paid plans).

### 9.2 Manual Backup

1. Go to Database ‚Üí Backups
2. Click "Create backup"
3. Wait for backup to complete
4. Download backup if needed

### 9.3 Backup via CLI

```bash
# Install Supabase CLI
npm install -g supabase

# Login
supabase login

# Link to project
supabase link --project-ref your-project-ref

# Create backup
supabase db dump -f backup.sql
```

---

## Step 10: Monitoring & Maintenance

### 10.1 Monitor Database Performance

1. Go to Database ‚Üí Query Performance
2. View slow queries
3. Optimize as needed

### 10.2 View Logs

1. Go to Logs ‚Üí Postgres Logs
2. Filter by severity
3. Investigate errors

### 10.3 Monitor API Usage

1. Go to Settings ‚Üí API
2. View request count
3. Monitor rate limits

---

## Troubleshooting

### Issue: RLS Policies Not Working

**Solution:**
```sql
-- Check if RLS is enabled
SELECT tablename, rowsecurity 
FROM pg_tables 
WHERE schemaname = 'public';

-- Check existing policies
SELECT * FROM pg_policies WHERE schemaname = 'public';
```

### Issue: Trigger Not Firing

**Solution:**
```sql
-- Check if trigger exists
SELECT * FROM pg_trigger WHERE tgname = 'on_auth_user_created';

-- Manually run function for existing user
SELECT initialize_user_daily_tasks() FROM auth.users WHERE id = 'user-id';
```

### Issue: Can't Connect from Frontend

**Solution:**
1. Verify environment variables are set
2. Check Supabase project is not paused
3. Verify API keys are correct
4. Check browser console for CORS errors
5. Verify redirect URLs are configured

---

## Security Best Practices

1. **Never expose service_role key** in frontend code
2. **Always use RLS policies** for data access control
3. **Validate input** on both client and server
4. **Use prepared statements** (Supabase does this automatically)
5. **Rotate API keys** periodically
6. **Monitor for suspicious activity** in logs
7. **Keep Supabase client library updated**

---

## Cost Management

### Free Tier Limits
- 500 MB database space
- 1 GB file storage
- 2 GB bandwidth
- 50,000 monthly active users
- Unlimited API requests

### Monitoring Usage
1. Go to Settings ‚Üí Usage
2. View current usage
3. Set up alerts for approaching limits

---

## Next Steps

1. ‚úÖ Database schema created
2. ‚úÖ 50-day curriculum populated
3. ‚úÖ RLS policies enabled
4. ‚úÖ Authentication configured
5. ‚úÖ Admin user created
6. ‚úÖ Frontend integrated
7. ‚è≥ Deploy frontend to production
8. ‚è≥ Configure custom domain
9. ‚è≥ Monitor and optimize

---

## Support Resources

- **Supabase Docs:** https://supabase.com/docs
- **Supabase Discord:** https://discord.supabase.com
- **GitHub Issues:** https://github.com/supabase/supabase/issues

---

**Last Updated:** January 2, 2026  
**Version:** 1.0.0  
**Status:** Complete Setup Guide
