# üöÄ Complete Vercel Deployment Guide

## Prerequisites

- Vercel account (free tier works)
- GitHub repository with your code
- Supabase project set up
- Domain name (optional, for custom domain)

---

## Method 1: Deploy via Vercel Dashboard (Recommended for First Time)

### Step 1: Prepare Your Repository

1. **Push code to GitHub:**
```bash
cd /workspace/chasemycareer
git init
git add .
git commit -m "Initial commit"
git branch -M main
git remote add origin https://github.com/YOUR_USERNAME/chase-my-career.git
git push -u origin main
```

### Step 2: Import Project to Vercel

1. Go to https://vercel.com/dashboard
2. Click "Add New" ‚Üí "Project"
3. Import your GitHub repository
4. Configure project:
   - **Framework Preset:** Vite
   - **Root Directory:** `frontend`
   - **Build Command:** `npm run build`
   - **Output Directory:** `dist`
   - **Install Command:** `npm install`

### Step 3: Configure Environment Variables

In Vercel Dashboard ‚Üí Project Settings ‚Üí Environment Variables, add:

```
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key-here
VITE_GOOGLE_CLIENT_ID=your-google-client-id (optional)
```

**Important:** Add these for all environments (Production, Preview, Development)

### Step 4: Deploy

1. Click "Deploy"
2. Wait for build to complete (~2-3 minutes)
3. Your app will be live at: `https://your-project.vercel.app`

---

## Method 2: Deploy via Vercel CLI

### Step 1: Install Vercel CLI

```bash
npm install -g vercel
```

### Step 2: Login to Vercel

```bash
vercel login
```

Follow the prompts to authenticate.

### Step 3: Navigate to Frontend Directory

```bash
cd /workspace/chasemycareer/frontend
```

### Step 4: Deploy

**For first deployment:**
```bash
vercel
```

Answer the prompts:
- Set up and deploy? **Yes**
- Which scope? **Your account**
- Link to existing project? **No**
- Project name? **chase-my-career**
- Directory? **./** (current directory)
- Override settings? **Yes**
  - Build Command: `npm run build`
  - Output Directory: `dist`
  - Development Command: `npm run dev`

**For production deployment:**
```bash
vercel --prod
```

### Step 5: Set Environment Variables via CLI

```bash
# Set Supabase URL
vercel env add VITE_SUPABASE_URL production
# Paste your Supabase URL when prompted

# Set Supabase Anon Key
vercel env add VITE_SUPABASE_ANON_KEY production
# Paste your Supabase anon key when prompted

# Set Google Client ID (optional)
vercel env add VITE_GOOGLE_CLIENT_ID production
# Paste your Google client ID when prompted
```

### Step 6: Redeploy with Environment Variables

```bash
vercel --prod
```

---

## Method 3: Automated Deployment with GitHub Actions

### Step 1: Get Vercel Tokens

1. Go to https://vercel.com/account/tokens
2. Create a new token
3. Copy the token

### Step 2: Get Project IDs

```bash
cd /workspace/chasemycareer/frontend
vercel link
```

This creates `.vercel/project.json` with your project details.

```bash
cat .vercel/project.json
```

Copy the `orgId` and `projectId`.

### Step 3: Add GitHub Secrets

Go to your GitHub repository ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions

Add these secrets:
- `VERCEL_TOKEN`: Your Vercel token
- `VERCEL_ORG_ID`: Your organization ID
- `VERCEL_PROJECT_ID`: Your project ID
- `VITE_SUPABASE_URL`: Your Supabase URL
- `VITE_SUPABASE_ANON_KEY`: Your Supabase anon key

### Step 4: Push to Main Branch

```bash
git add .
git commit -m "Add deployment configuration"
git push origin main
```

GitHub Actions will automatically deploy to Vercel!

---

## Configure Custom Domain (www.chasemycareer.com)

### Step 1: Add Domain in Vercel

1. Go to Vercel Dashboard ‚Üí Your Project ‚Üí Settings ‚Üí Domains
2. Click "Add"
3. Enter: `chasemycareer.com`
4. Click "Add"
5. Add another: `www.chasemycareer.com`
6. Click "Add"

### Step 2: Configure DNS Records

Vercel will show you the required DNS records. Add these to your domain registrar:

**For root domain (chasemycareer.com):**
```
Type: A
Name: @
Value: 76.76.21.21
TTL: 3600
```

**For www subdomain (www.chasemycareer.com):**
```
Type: CNAME
Name: www
Value: cname.vercel-dns.com
TTL: 3600
```

### Step 3: Wait for DNS Propagation

- DNS changes can take 24-48 hours to propagate
- Check status: https://www.whatsmydns.net/
- Vercel will automatically provision SSL certificate

### Step 4: Set Primary Domain

1. In Vercel Dashboard ‚Üí Domains
2. Click the three dots next to `www.chasemycareer.com`
3. Select "Set as Primary Domain"
4. This will redirect `chasemycareer.com` ‚Üí `www.chasemycareer.com`

### Step 5: Update Supabase Redirect URLs

1. Go to Supabase Dashboard ‚Üí Authentication ‚Üí URL Configuration
2. Add these URLs:
   - `https://www.chasemycareer.com/**`
   - `https://chasemycareer.com/**`
3. Update OAuth redirect URLs in Google Cloud Console (if using Google OAuth)

---

## Deployment Scripts

### Quick Deploy Script

Create `deploy.sh` in project root:

```bash
#!/bin/bash

echo "üöÄ Deploying Chase My Career to Vercel..."

# Navigate to frontend
cd frontend

# Install dependencies
echo "üì¶ Installing dependencies..."
npm ci

# Run tests
echo "üß™ Running tests..."
npm run test:run

# Run linter
echo "üîç Running linter..."
npm run lint

# Build application
echo "üèóÔ∏è  Building application..."
npm run build

# Deploy to Vercel
echo "üöÄ Deploying to Vercel..."
vercel --prod

echo "‚úÖ Deployment complete!"
```

Make it executable:
```bash
chmod +x deploy.sh
```

Run it:
```bash
./deploy.sh
```

### Preview Deploy Script

Create `deploy-preview.sh`:

```bash
#!/bin/bash

echo "üöÄ Deploying preview to Vercel..."

cd frontend
npm ci
npm run build
vercel

echo "‚úÖ Preview deployment complete!"
```

---

## Vercel Configuration File

Create `vercel.json` in `frontend/` directory:

```json
{
  "version": 2,
  "buildCommand": "npm run build",
  "outputDirectory": "dist",
  "devCommand": "npm run dev",
  "installCommand": "npm install",
  "framework": "vite",
  "rewrites": [
    {
      "source": "/(.*)",
      "destination": "/index.html"
    }
  ],
  "headers": [
    {
      "source": "/(.*)",
      "headers": [
        {
          "key": "X-Frame-Options",
          "value": "DENY"
        },
        {
          "key": "X-Content-Type-Options",
          "value": "nosniff"
        },
        {
          "key": "Referrer-Policy",
          "value": "strict-origin-when-cross-origin"
        },
        {
          "key": "Permissions-Policy",
          "value": "geolocation=(), microphone=(), camera=()"
        }
      ]
    },
    {
      "source": "/assets/(.*)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=31536000, immutable"
        }
      ]
    }
  ],
  "env": {
    "VITE_SUPABASE_URL": "@vite_supabase_url",
    "VITE_SUPABASE_ANON_KEY": "@vite_supabase_anon_key",
    "VITE_GOOGLE_CLIENT_ID": "@vite_google_client_id"
  }
}
```

---

## Troubleshooting

### Build Fails

**Issue:** Build fails with module not found error

**Solution:**
```bash
cd frontend
rm -rf node_modules package-lock.json
npm install
npm run build
```

### Environment Variables Not Working

**Issue:** App can't connect to Supabase

**Solution:**
1. Verify variables are set in Vercel Dashboard
2. Ensure variable names start with `VITE_`
3. Redeploy after adding variables
4. Check browser console for actual values (they should be visible in production)

### Domain Not Working

**Issue:** Custom domain shows error

**Solution:**
1. Verify DNS records are correct
2. Wait 24-48 hours for DNS propagation
3. Check DNS with: `nslookup www.chasemycareer.com`
4. Verify SSL certificate is provisioned in Vercel

### 404 on Page Refresh

**Issue:** Refreshing page shows 404

**Solution:**
- Ensure `vercel.json` has the rewrite rule (see above)
- Or add `_redirects` file in `public/`:
```
/*    /index.html   200
```

---

## Monitoring & Analytics

### Enable Vercel Analytics

1. Go to Vercel Dashboard ‚Üí Your Project ‚Üí Analytics
2. Click "Enable Analytics"
3. Add to your app:

```bash
npm install @vercel/analytics
```

In `src/main.tsx`:
```typescript
import { inject } from '@vercel/analytics';

inject();
```

### Enable Vercel Speed Insights

```bash
npm install @vercel/speed-insights
```

In `src/main.tsx`:
```typescript
import { injectSpeedInsights } from '@vercel/speed-insights';

injectSpeedInsights();
```

---

## Rollback Deployment

### Via Dashboard

1. Go to Vercel Dashboard ‚Üí Your Project ‚Üí Deployments
2. Find the previous working deployment
3. Click the three dots ‚Üí "Promote to Production"

### Via CLI

```bash
# List deployments
vercel ls

# Rollback to specific deployment
vercel rollback [deployment-url]
```

---

## Cost Estimation

### Vercel Free Tier (Hobby)
- ‚úÖ Unlimited deployments
- ‚úÖ 100 GB bandwidth/month
- ‚úÖ Automatic HTTPS
- ‚úÖ Preview deployments
- ‚úÖ Custom domains
- ‚ùå No team features
- ‚ùå No advanced analytics

### Vercel Pro ($20/month)
- ‚úÖ Everything in Free
- ‚úÖ 1 TB bandwidth/month
- ‚úÖ Advanced analytics
- ‚úÖ Password protection
- ‚úÖ Team collaboration

**Recommendation:** Start with Free tier, upgrade if needed.

---

## Post-Deployment Checklist

- [ ] Application is accessible at Vercel URL
- [ ] Custom domain is configured (if applicable)
- [ ] SSL certificate is active (HTTPS works)
- [ ] Environment variables are set correctly
- [ ] User registration works
- [ ] Login/logout works
- [ ] Database connections work
- [ ] OAuth flows work (if configured)
- [ ] All pages are accessible
- [ ] No console errors
- [ ] Analytics enabled (optional)
- [ ] Monitoring set up (optional)

---

## Useful Commands

```bash
# Deploy to production
vercel --prod

# Deploy preview
vercel

# View deployments
vercel ls

# View logs
vercel logs

# Remove deployment
vercel rm [deployment-url]

# Link project
vercel link

# Pull environment variables
vercel env pull

# Check project info
vercel inspect
```

---

## Support

- **Vercel Docs:** https://vercel.com/docs
- **Vercel Support:** https://vercel.com/support
- **Community:** https://github.com/vercel/vercel/discussions

---

**Last Updated:** January 2, 2026  
**Version:** 1.0.0  
**Status:** Production Ready
