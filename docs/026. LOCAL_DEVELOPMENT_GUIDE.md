# ChaseMyCareer - Local Development Guide

## ğŸ“ Project Structure

```
chasemycareer/
â”œâ”€â”€ frontend/              # React application
â”‚   â”œâ”€â”€ src/              # Source code
â”‚   â”œâ”€â”€ public/           # Static assets
â”‚   â”œâ”€â”€ package.json      # Frontend dependencies
â”‚   â””â”€â”€ README.md         # Frontend documentation
â”‚
â”œâ”€â”€ backend/              # Supabase backend
â”‚   â”œâ”€â”€ supabase/         # Supabase configuration
â”‚   â”‚   â”œâ”€â”€ functions/    # Edge functions
â”‚   â”‚   â”œâ”€â”€ migrations/   # Database migrations
â”‚   â”‚   â””â”€â”€ config.toml   # Supabase config
â”‚   â”œâ”€â”€ package.json      # Backend dependencies (if any)
â”‚   â””â”€â”€ README.md         # Backend documentation
â”‚
â”œâ”€â”€ docs/                 # Project documentation
â”œâ”€â”€ .env.example          # Environment variables template
â””â”€â”€ README.md             # Main project documentation
```

---

## ğŸš€ Quick Start (5 minutes)

### Prerequisites

- **Node.js** 18+ ([Download](https://nodejs.org/))
- **npm** or **pnpm** (comes with Node.js)
- **Supabase Account** ([Sign up free](https://supabase.com))
- **Git** (optional, for version control)

### Installation Steps

```bash
# 1. Clone or download the project
cd chasemycareer

# 2. Install frontend dependencies
cd frontend
npm install

# 3. Install backend dependencies (if any)
cd ../backend
npm install

# 4. Set up environment variables
cd ..
cp .env.example frontend/.env.local
# Edit frontend/.env.local with your Supabase credentials

# 5. Run the application
cd frontend
npm run dev
```

Your app will be running at `http://localhost:5173`

---

## ğŸ“¦ Detailed Setup

### Step 1: Install Frontend

```bash
cd frontend
npm install
```

**What this does:**
- Installs React, Vite, and all UI dependencies
- Sets up Tailwind CSS and shadcn/ui components
- Installs Supabase client library
- Configures development tools

**Time:** ~2-3 minutes

### Step 2: Install Backend

```bash
cd backend
npm install
```

**What this does:**
- Installs Supabase CLI (if needed)
- Sets up edge function dependencies
- Configures database tools

**Time:** ~1-2 minutes

### Step 3: Configure Environment Variables

#### Frontend Environment Variables

Create `frontend/.env.local`:

```env
# Supabase Configuration
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key

# Google OAuth (optional)
VITE_GOOGLE_CLIENT_ID=your-google-client-id

# Cloudflare (optional)
VITE_CLOUDFLARE_ACCOUNT_ID=your-account-id
VITE_CLOUDFLARE_API_TOKEN=your-api-token
VITE_CLOUDFLARE_WORKER_URL=https://your-worker.workers.dev

# Application
VITE_APP_ID=chasemycareer
VITE_API_ENV=development
```

**Where to find these values:**

1. **Supabase URL & Key:**
   - Go to [Supabase Dashboard](https://supabase.com/dashboard)
   - Select your project
   - Go to Settings â†’ API
   - Copy "Project URL" and "anon public" key

2. **Google Client ID:**
   - Go to [Google Cloud Console](https://console.cloud.google.com)
   - Create OAuth 2.0 credentials
   - Copy Client ID

3. **Cloudflare (optional):**
   - See `CLOUDFLARE_SETUP_GUIDE.md` for details

#### Backend Environment Variables

Create `backend/.env`:

```env
# Supabase Project Reference
SUPABASE_PROJECT_REF=your-project-ref
SUPABASE_DB_PASSWORD=your-db-password
SUPABASE_ACCESS_TOKEN=your-access-token
```

**Where to find these:**
- Supabase Dashboard â†’ Settings â†’ General â†’ Reference ID
- Database password from project creation
- Access token from Account â†’ Access Tokens

---

## ğŸƒ Running the Application

### Development Mode

#### Option 1: Run Frontend Only (Recommended for UI development)

```bash
cd frontend
npm run dev
```

- Opens at `http://localhost:5173`
- Hot reload enabled
- Uses your Supabase cloud instance

#### Option 2: Run with Local Supabase (Full local development)

**Terminal 1 - Start Supabase:**
```bash
cd backend
npx supabase start
```

**Terminal 2 - Start Frontend:**
```bash
cd frontend
npm run dev
```

- Frontend: `http://localhost:5173`
- Supabase Studio: `http://localhost:54323`
- Local database with test data

#### Option 3: Run Both with One Command

Create a root `package.json`:

```json
{
  "name": "chasemycareer",
  "scripts": {
    "dev": "concurrently \"npm run dev:frontend\" \"npm run dev:backend\"",
    "dev:frontend": "cd frontend && npm run dev",
    "dev:backend": "cd backend && npx supabase start",
    "install:all": "npm install && cd frontend && npm install && cd ../backend && npm install"
  },
  "devDependencies": {
    "concurrently": "^8.2.2"
  }
}
```

Then run:
```bash
npm install
npm run dev
```

### Production Build

```bash
cd frontend
npm run build
```

Output will be in `frontend/dist/`

---

## ğŸ—„ï¸ Database Setup

### Option 1: Use Cloud Supabase (Easiest)

1. Create project at [supabase.com](https://supabase.com)
2. Copy credentials to `frontend/.env.local`
3. Run migrations:

```bash
cd backend
npx supabase db push
```

### Option 2: Local Supabase (Full control)

1. Install Docker Desktop
2. Start local Supabase:

```bash
cd backend
npx supabase init
npx supabase start
```

3. Apply migrations:

```bash
npx supabase db reset
```

4. Access Supabase Studio at `http://localhost:54323`

### Running Migrations

```bash
cd backend

# Apply all migrations
npx supabase db push

# Create new migration
npx supabase migration new migration_name

# Reset database (caution: deletes all data)
npx supabase db reset
```

---

## ğŸ§ª Testing

### Frontend Tests

```bash
cd frontend

# Run linter
npm run lint

# Type check
npm run type-check

# Build test
npm run build
```

### Backend Tests

```bash
cd backend

# Test database connection
npx supabase db ping

# Validate migrations
npx supabase db lint

# Test edge functions
npx supabase functions serve
```

---

## ğŸ“ Common Commands

### Frontend

```bash
cd frontend

# Development
npm run dev              # Start dev server
npm run build            # Build for production
npm run preview          # Preview production build
npm run lint             # Run linter
npm run type-check       # Check TypeScript types

# Dependencies
npm install              # Install dependencies
npm install <package>    # Add new package
npm update               # Update dependencies
```

### Backend

```bash
cd backend

# Supabase
npx supabase start       # Start local Supabase
npx supabase stop        # Stop local Supabase
npx supabase status      # Check status
npx supabase db reset    # Reset database

# Migrations
npx supabase db push     # Apply migrations
npx supabase db pull     # Pull remote schema
npx supabase migration new <name>  # Create migration

# Edge Functions
npx supabase functions serve       # Test locally
npx supabase functions deploy      # Deploy to cloud
```

---

## ğŸ› Troubleshooting

### Frontend Issues

#### Port 5173 already in use
```bash
# Kill the process
lsof -ti:5173 | xargs kill -9

# Or use a different port
npm run dev -- --port 3000
```

#### Module not found errors
```bash
cd frontend
rm -rf node_modules package-lock.json
npm install
```

#### Environment variables not working
- Ensure file is named `.env.local` (not `.env`)
- Restart dev server after changes
- Variables must start with `VITE_`

### Backend Issues

#### Supabase won't start
```bash
# Check Docker is running
docker ps

# Reset Supabase
cd backend
npx supabase stop
npx supabase start
```

#### Migration errors
```bash
# Check migration syntax
npx supabase db lint

# Reset and reapply
npx supabase db reset
```

#### Connection refused
- Check Supabase is running: `npx supabase status`
- Verify credentials in `.env.local`
- Check firewall settings

### General Issues

#### npm install fails
```bash
# Clear npm cache
npm cache clean --force

# Use legacy peer deps
npm install --legacy-peer-deps

# Try pnpm instead
npm install -g pnpm
pnpm install
```

#### Build fails
```bash
# Check Node version
node --version  # Should be 18+

# Clear build cache
rm -rf frontend/dist
rm -rf frontend/.vite

# Rebuild
cd frontend
npm run build
```

---

## ğŸ”§ Development Workflow

### Daily Development

1. **Start your day:**
```bash
cd frontend
npm run dev
```

2. **Make changes:**
   - Edit files in `frontend/src/`
   - Changes auto-reload in browser

3. **Test changes:**
   - Check browser console for errors
   - Test functionality manually
   - Run `npm run lint` before committing

4. **Database changes:**
```bash
cd backend
npx supabase migration new my_change
# Edit the migration file
npx supabase db push
```

### Adding New Features

1. **Frontend component:**
```bash
cd frontend/src/components
# Create new component file
# Import and use in pages
```

2. **Database table:**
```bash
cd backend
npx supabase migration new add_table_name
# Edit migration file with SQL
npx supabase db push
```

3. **API endpoint:**
```bash
cd backend/supabase/functions
npx supabase functions new function-name
# Edit function code
npx supabase functions deploy function-name
```

### Before Committing

```bash
# Frontend checks
cd frontend
npm run lint
npm run type-check
npm run build

# Backend checks
cd backend
npx supabase db lint
```

---

## ğŸ“š Project-Specific Commands

### Create Test Users

```bash
cd backend
npx supabase db reset  # Includes test users from migrations
```

Test accounts:
- **Admin:** admin@chasemycareer.de / Admin2024!
- **Demo:** demo@chasemycareer.de / DemoUser2024!
- **Test:** test@chasemycareer.de / TestUser2024!

### Reset Demo Data

```bash
cd backend
npx supabase db reset
```

### Deploy to Production

```bash
# Build frontend
cd frontend
npm run build

# Deploy to Cloudflare Pages
npx wrangler pages deploy dist --project-name=chasemycareer

# Deploy edge functions
cd ../backend
npx supabase functions deploy
```

---

## ğŸŒ Accessing Services

### Local Development

- **Frontend:** http://localhost:5173
- **Supabase Studio:** http://localhost:54323
- **Supabase API:** http://localhost:54321
- **Supabase Auth:** http://localhost:54321/auth/v1

### Production

- **Frontend:** https://your-domain.com
- **Supabase:** https://your-project.supabase.co
- **Cloudflare Worker:** https://your-worker.workers.dev

---

## ğŸ“– Additional Resources

### Documentation

- **Frontend README:** `frontend/README.md`
- **Backend README:** `backend/README.md`
- **Cloudflare Setup:** `CLOUDFLARE_SETUP_GUIDE.md`
- **API Examples:** `CLOUDFLARE_INTEGRATION_PLAN.md`

### External Links

- [React Documentation](https://react.dev)
- [Vite Documentation](https://vitejs.dev)
- [Supabase Documentation](https://supabase.com/docs)
- [Tailwind CSS](https://tailwindcss.com)
- [shadcn/ui](https://ui.shadcn.com)

---

## ğŸ†˜ Getting Help

### Check These First

1. **Console Errors:** Open browser DevTools (F12) â†’ Console
2. **Network Tab:** Check API requests and responses
3. **Supabase Logs:** Supabase Dashboard â†’ Logs
4. **Terminal Output:** Check for error messages

### Common Solutions

- **Clear browser cache:** Ctrl+Shift+Delete
- **Restart dev server:** Ctrl+C, then `npm run dev`
- **Reinstall dependencies:** `rm -rf node_modules && npm install`
- **Check environment variables:** Verify `.env.local` exists and is correct

### Still Stuck?

1. Check project documentation in `/docs`
2. Review error messages carefully
3. Search for error in project issues
4. Check Supabase status page

---

## âœ… Verification Checklist

After setup, verify everything works:

- [ ] Frontend starts without errors (`npm run dev`)
- [ ] Can access http://localhost:5173
- [ ] No console errors in browser
- [ ] Can log in with test account
- [ ] Database queries work
- [ ] Images load correctly
- [ ] Navigation works
- [ ] Supabase connection successful

---

## ğŸ‰ You're Ready!

Your development environment is set up. Start coding!

**Quick commands to remember:**

```bash
# Start development
cd frontend && npm run dev

# Run linter
npm run lint

# Build for production
npm run build

# Database migrations
cd backend && npx supabase db push
```

**Happy coding!** ğŸš€
